<style>
  @import url('assets/js/client.js');
</style>
<app-header></app-header>
<div class="container-fluid flex-column">
  <div class="header bg-light">
    <h4 class="text-dark"><strong class="banner-text mr-5">Checkout</strong></h4>
    <h4 class="text-dark"><strong class="basket" routerLink="/basket">Basket</strong></h4>
    <h4 class="text-dark"><strong class="delivery-address" (click)="backToDeliveryAddress()">Deliver Address</strong></h4>
    <h4 class="text-dark"><strong class="make-payment">Make Payment</strong></h4>
  </div>
  <div class="d-flex container-fluid wrap main-section">
    <div class="details-section bg-light">
      <div class="order-summary">
        <h4><strong>Order Summary</strong></h4>
      </div>
      <div class="d-flex justify-content-between">
        <span>Items: </span>
        <span>{{order.subTotal | currency: 'GBP'}}</span>
      </div>
      <div class="d-flex justify-content-between">
        <span>Tax: </span>
        <span>{{order.saleTax  | currency: 'GBP'}}</span>
      </div>
      <div class="d-flex justify-content-between">
        <span>Delivery fee: </span>
        <span>{{order.shippingCost  | currency: 'GBP'}}</span>
      </div>
      <div class="d-flex justify-content-between">
        <span>Packaging : </span>
        <span>{{order.packagingCost  | currency: 'GBP'}}</span>
      </div>
      <hr>
      <div class="d-flex justify-content-between">
        <span>Discount: </span>
        <span>{{order.discount  | currency: 'GBP'}}</span>
      </div>
      <hr>
      <div class="d-flex justify-content-between">
        <strong>Order Total: </strong>
        <strong>{{order.totalCost  | currency: 'GBP'}}</strong>
      </div>
      <hr>
      <div class="d-flex justify-content-between">
        <small class="text-muted">You've saved today:</small>
        <strong>{{order.discount | currency: 'GBP'}}</strong>
      </div>
    </div>
    <div class="payment-section bg-light">
      <div class="title-section">
        <div class="">
          <span style="color: teal;">How are delivery costs calculated?</span>
        </div>
        <p class="text-normal">
          Bigtree Delivery has been applied to the eligible items in your order.
        </p>
      </div>
      <!-- Display a payment form -->
      <form id="payment-form" class="stripe-form">
        <div id="card-element">
          <!--Stripe.js injects the Card Element-->
        </div>
        <button id="paywithCardButton" class="stripe-button" (click)="makePayment()">
          <div class="spinner hidden stripe-button" id="spinner"></div>
          <span id="button-text">Pay</span><span class="px-3">{{order.totalCost  | currency: 'GBP'}}</span>
        </button>
        <small class="text-muted">By selecting this button, you agree to the Terms of Sale.</small>
      </form>
      <div id="payment-result" class="payment-result hidden">
        <span id="card-success" class="success-message"></span>
        <span id="card-error" role="alert" class="error-message"></span>
      </div>
      <img src="/assets/icons/secure-stripe-payment-logo.png" class="stripe-logo" />
    </div>
  </div>
</div>
